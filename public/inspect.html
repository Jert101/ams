<!DOCTYPE html>
<html>
<head>
    <title>Profile Photo Inspector</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .button {
            display: inline-block;
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            margin: 10px 0;
        }
        .code {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        h1 {
            color: #333;
        }
    </style>
</head>
<body>
    <h1>Profile Photo Inspector</h1>
    
    <p>This tool helps identify the structure of the profile photo section on the edit page.</p>
    
    <h2>How to Use</h2>
    
    <p>1. Drag this link to your bookmarks bar:</p>
    <p><a href="javascript:(function(){
        // Create output element
        var output = document.createElement('div');
        output.style.position = 'fixed';
        output.style.top = '10px';
        output.style.right = '10px';
        output.style.width = '400px';
        output.style.maxHeight = '80%';
        output.style.overflowY = 'auto';
        output.style.backgroundColor = 'white';
        output.style.border = '2px solid #4CAF50';
        output.style.padding = '15px';
        output.style.zIndex = '9999';
        output.style.fontSize = '12px';
        output.style.fontFamily = 'monospace';
        
        // Add close button
        var closeBtn = document.createElement('button');
        closeBtn.textContent = 'Close';
        closeBtn.style.position = 'absolute';
        closeBtn.style.top = '5px';
        closeBtn.style.right = '5px';
        closeBtn.onclick = function() {
            document.body.removeChild(output);
        };
        output.appendChild(closeBtn);
        
        // Add title
        var title = document.createElement('h3');
        title.textContent = 'Profile Photo Inspector';
        title.style.marginTop = '0';
        output.appendChild(title);
        
        // Find profile photo sections
        var results = document.createElement('div');
        
        // Look for labels containing 'Profile Photo'
        var labels = Array.from(document.querySelectorAll('label'))
            .filter(function(el) {
                return el.textContent.toLowerCase().includes('profile photo');
            });
        
        results.innerHTML += '<p>Found ' + labels.length + ' labels with "Profile Photo" text</p>';
        
        if (labels.length > 0) {
            labels.forEach(function(label, index) {
                results.innerHTML += '<h4>Label ' + (index + 1) + ':</h4>';
                results.innerHTML += '<p>Text: ' + label.textContent + '</p>';
                results.innerHTML += '<p>HTML: ' + label.outerHTML.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</p>';
                
                // Check parent
                var parent = label.parentElement;
                results.innerHTML += '<h4>Parent Element:</h4>';
                results.innerHTML += '<p>Tag: ' + parent.tagName + '</p>';
                results.innerHTML += '<p>Class: ' + parent.className + '</p>';
                
                // Look for container
                var container = parent.querySelector('.profile-photo-container');
                if (container) {
                    results.innerHTML += '<h4>Found .profile-photo-container:</h4>';
                    results.innerHTML += '<p>HTML: ' + container.outerHTML.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</p>';
                    
                    // Check for images
                    var images = container.querySelectorAll('img');
                    results.innerHTML += '<p>Found ' + images.length + ' images</p>';
                    
                    Array.from(images).forEach(function(img, imgIndex) {
                        results.innerHTML += '<p>Image ' + (imgIndex + 1) + ' src: ' + img.src + '</p>';
                        results.innerHTML += '<p>Image ' + (imgIndex + 1) + ' style: ' + img.getAttribute('style') + '</p>';
                        
                        // Check computed style
                        var style = window.getComputedStyle(img);
                        results.innerHTML += '<p>Image ' + (imgIndex + 1) + ' display: ' + style.display + '</p>';
                        results.innerHTML += '<p>Image ' + (imgIndex + 1) + ' visibility: ' + style.visibility + '</p>';
                    });
                } else {
                    results.innerHTML += '<p>No .profile-photo-container found</p>';
                    
                    // Look for empty divs
                    var emptyDivs = Array.from(parent.querySelectorAll('div'))
                        .filter(function(div) {
                            return div.children.length === 0;
                        });
                    
                    results.innerHTML += '<p>Found ' + emptyDivs.length + ' empty divs</p>';
                    
                    emptyDivs.forEach(function(div, divIndex) {
                        results.innerHTML += '<p>Empty div ' + (divIndex + 1) + ' class: ' + div.className + '</p>';
                        results.innerHTML += '<p>Empty div ' + (divIndex + 1) + ' style: ' + div.getAttribute('style') + '</p>';
                    });
                }
            });
        } else {
            // Try alternative search methods
            var profileTexts = Array.from(document.querySelectorAll('div, p, span'))
                .filter(function(el) {
                    return el.textContent.toLowerCase().includes('profile photo');
                });
            
            results.innerHTML += '<p>Found ' + profileTexts.length + ' elements containing "Profile Photo" text</p>';
            
            if (profileTexts.length > 0) {
                profileTexts.forEach(function(el, index) {
                    results.innerHTML += '<h4>Element ' + (index + 1) + ':</h4>';
                    results.innerHTML += '<p>Tag: ' + el.tagName + '</p>';
                    results.innerHTML += '<p>Text: ' + el.textContent + '</p>';
                    results.innerHTML += '<p>HTML: ' + el.outerHTML.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</p>';
                });
            }
            
            // Look for circular elements
            var circularElements = Array.from(document.querySelectorAll('div'))
                .filter(function(div) {
                    var style = window.getComputedStyle(div);
                    return style.borderRadius === '50%' || style.borderRadius.includes('50%');
                });
            
            results.innerHTML += '<p>Found ' + circularElements.length + ' circular elements</p>';
            
            if (circularElements.length > 0) {
                circularElements.forEach(function(el, index) {
                    results.innerHTML += '<h4>Circular Element ' + (index + 1) + ':</h4>';
                    results.innerHTML += '<p>Class: ' + el.className + '</p>';
                    results.innerHTML += '<p>HTML: ' + el.outerHTML.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</p>';
                });
            }
        }
        
        output.appendChild(results);
        document.body.appendChild(output);
    })();" class="button">Inspect Profile Photo</a></p>
    
    <p>2. Go to the edit page where profile photos aren't displaying</p>
    
    <p>3. Click the bookmarklet in your bookmarks bar</p>
    
    <p>4. Review the information displayed in the popup</p>
    
    <h2>What This Tool Does</h2>
    <p>This inspector will:</p>
    <ul>
        <li>Find elements related to the profile photo section</li>
        <li>Show their HTML structure and styling</li>
        <li>Help identify why photos aren't displaying</li>
    </ul>
    
    <h2>Next Steps</h2>
    <p>After inspecting, use this information to create a targeted fix for your specific page structure.</p>
    
    <p><a href="/admin/users" class="button">Go to Users Page</a></p>
</body>
</html> 